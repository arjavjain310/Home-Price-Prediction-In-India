<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <title>Home Price Prediction</title>
    <style>
      /* Critical dark theme - always applied */
      *{box-sizing:border-box}
      body{font-family:'Plus Jakarta Sans',system-ui,sans-serif;background:#0c0e12;color:#e5e7eb;margin:0;min-height:100vh;line-height:1.6}
      .page-wrap{min-height:100vh;position:relative}
      .bg-gradient{position:fixed;inset:0;background:radial-gradient(ellipse 120% 80% at 50% -20%,rgba(245,158,11,0.12),transparent 50%);pointer-events:none;z-index:0}
      .container{max-width:520px;margin:0 auto;padding:2rem 1.25rem;position:relative;z-index:1}
      .header{text-align:center;margin-bottom:2rem}
      .hero-image{margin-bottom:1.25rem}
      .house-svg{width:140px;height:auto;display:inline-block;filter:drop-shadow(0 8px 24px rgba(245,158,11,0.2))}
      .header h1{font-size:1.85rem;font-weight:700;margin:0 0 0.5rem;background:linear-gradient(135deg,#fff,#d1d5db);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
      .subtitle{color:#9ca3af;font-size:0.95rem;margin:0}
      .main{background:#151922;padding:1.75rem 1.5rem;border-radius:16px;border:1px solid #2a3142;box-shadow:0 4px 24px rgba(0,0,0,0.4)}
      .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
      .form-group{margin-bottom:1.25rem}
      .form-group label{display:block;font-weight:600;margin-bottom:0.5rem;font-size:0.9rem;color:#e5e7eb}
      .label-hint{color:#9ca3af;font-size:0.8rem}
      .form-group input,.form-group select{width:100%;padding:0.75rem 1rem;border:1px solid #2a3142;border-radius:12px;font-size:1rem;background:#1a1f2e;color:#e5e7eb;font-family:inherit}
      .form-group input:focus,.form-group select:focus{outline:none;border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,0.25)}
      .btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;width:100%;padding:0.9rem 1.25rem;font-size:1.05rem;font-weight:600;color:#0c0e12;background:linear-gradient(135deg,#f59e0b,#d97706);border:none;border-radius:12px;cursor:pointer;margin-top:0.75rem;font-family:inherit;text-decoration:none}
      .btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(245,158,11,0.25)}
      .footer{text-align:center;margin-top:2rem;font-size:0.85rem;color:#9ca3af}
      .footer p{margin:0}
      @media(max-width:480px){.form-grid{grid-template-columns:1fr}}
    </style>
    <link rel="stylesheet" th:href="@{/css/style.css(v=3)}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
</head>
<body>
    <div class="page-wrap">
        <div class="bg-gradient"></div>
        <div class="container">
            <header class="header">
                <div class="hero-section">
                    <div class="hero-image" aria-hidden="true">
                        <svg viewBox="0 0 200 160" xmlns="http://www.w3.org/2000/svg" class="house-svg">
                            <defs>
                                <linearGradient id="roofGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f59e0b"/>
                                    <stop offset="100%" style="stop-color:#d97706"/>
                                </linearGradient>
                                <linearGradient id="wallGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#374151"/>
                                    <stop offset="100%" style="stop-color:#1f2937"/>
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="2" result="blur"/>
                                    <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                </filter>
                            </defs>
                            <path d="M100 20 L180 80 L180 150 L20 150 L20 80 Z" fill="url(#roofGrad)" stroke="#b45309" stroke-width="1"/>
                            <path d="M40 150 L40 95 L100 55 L160 95 L160 150 Z" fill="url(#wallGrad)" stroke="#111827" stroke-width="1"/>
                            <rect x="75" y="95" width="50" height="55" fill="#0f172a" stroke="#475569" stroke-width="1"/>
                            <rect x="82" y="105" width="16" height="20" fill="#f59e0b" opacity="0.9"/>
                            <rect x="98" y="105" width="16" height="20" fill="#f59e0b" opacity="0.9"/>
                        </svg>
                    </div>
                    <h1>Home Price Prediction</h1>
                    <p class="subtitle">Enter property details to get an estimated price in Indian Rupees (₹)</p>
                </div>
            </header>

            <main class="main">
                <form th:action="@{/predict}" th:object="${propertyInput}" method="post" class="form" id="predictForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="squareFeet">Square Feet</label>
                            <input type="number" id="squareFeet" th:field="*{squareFeet}" min="100" max="10000" step="1" placeholder="e.g. 1500" required autocomplete="off"/>
                            <span class="error" th:if="${#fields.hasErrors('squareFeet')}" th:errors="*{squareFeet}"></span>
                        </div>
                        <div class="form-group">
                            <label for="bhk">Bedrooms (BHK)</label>
                            <input type="number" id="bhk" th:field="*{bhk}" min="1" max="10" placeholder="e.g. 3" required/>
                            <span class="error" th:if="${#fields.hasErrors('bhk')}" th:errors="*{bhk}"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bathrooms">Bathrooms</label>
                        <input type="number" id="bathrooms" th:field="*{bathrooms}" min="1" max="10" placeholder="e.g. 2" required/>
                        <span class="error" th:if="${#fields.hasErrors('bathrooms')}" th:errors="*{bathrooms}"></span>
                    </div>
                    <div class="form-group">
                        <label for="location">Location <span class="label-hint">(States & Union Territories of India)</span></label>
                        <select id="location" th:field="*{location}" required>
                            <option value="" disabled>Select state or union territory</option>
                            <option th:each="loc : ${locations}" th:value="${loc}" th:text="${loc}"></option>
                        </select>
                        <span class="error" th:if="${#fields.hasErrors('location')}" th:errors="*{location}"></span>
                    </div>
                    <button type="submit" class="btn btn-predict">
                        <span class="btn-text">Predict Price</span>
                        <span class="btn-icon">₹</span>
                    </button>
                </form>
            </main>

            <footer class="footer">
                <p>Estimates are based on a Linear Regression model. Use for reference only.</p>
            </footer>
        </div>
    </div>
    <script th:inline="javascript">
        document.getElementById('predictForm').addEventListener('submit', function() {
            var btn = this.querySelector('.btn-predict');
            if (btn) { btn.classList.add('loading'); btn.querySelector('.btn-text').textContent = 'Predicting…'; }
        });
        document.querySelectorAll('.form-group input, .form-group select').forEach(function(el) {
            el.addEventListener('focus', function() { this.closest('.form-group').classList.add('focused'); });
            el.addEventListener('blur', function() { this.closest('.form-group').classList.remove('focused'); });
        });
    </script>
</body>
</html>
